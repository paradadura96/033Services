<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>033Services 🚗🏁</title>
<style>
body { font-family: Arial, sans-serif; background: #111; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; }
#container { width: 100%; max-width: 400px; background: #222; border-radius: 10px; padding: 20px; }
input, select, button { width: 100%; margin: 6px 0; padding: 10px; border-radius: 6px; border: none; font-size: 16px; }
button { background: #5b2cff; color: #fff; cursor: pointer; }
label { margin-top: 10px; display: block; }
</style>
</head>
<body>
<div id="container">
<h2>033Services 🚗🏁</h2>

<label>Ponto de partida:</label>
<input type="text" id="start" placeholder="Ex: Via Roma 10">

<label>Destino:</label>
<input type="text" id="end" placeholder="Ex: Piazza Castello">

<label>Telefone do cliente:</label>
<input type="text" id="phone" placeholder="Ex: +39 3519117500">

<label>Bagagem:</label>
<select id="baggage">
  <option value="0">Sem bagagem</option>
  <option value="1">1 mala</option>
  <option value="2">2 malas</option>
  <option value="3">3 malas</option>
  <option value="4">4 malas</option>
  <option value="5">5 malas</option>
</select>

<label>Agendar horário (opcional):</label>
<input type="time" id="time">

<label>Urgente?</label>
<select id="urgent">
  <option value="0">Não</option>
  <option value="1">Sim</option>
</select>

<button onclick="calculateAndSend()">Calcular Corrida</button>

<p id="result"></p>
</div>

<script>
const BOT_TOKEN = "COLOQUE_SEU_TOKEN_AQUI";
const CHAT_ID = "COLOQUE_SEU_CHAT_ID_AQUI";

function calculateAndSend(){
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  const phone = document.getElementById("phone").value;
  const baggage = parseInt(document.getElementById("baggage").value);
  const time = document.getElementById("time").value;
  const urgent = parseInt(document.getElementById("urgent").value);

  if(!start || !end || !phone){
    alert("Preencha ponto de partida, destino e telefone.");
    return;
  }

  // DISTÂNCIA FIXA PARA TESTE (vai trocar por API Google depois)
  const distanceKm = 5; // km, exemplo Torino
  let price = 5 + distanceKm*1.75; // 5€ deslocamento + 1.75€/km

  // Bagagem: acima de 3, +2€ a cada 2 malas
  if(baggage > 3){
    price += Math.ceil((baggage-3)/2)*2;
  }
  if(urgent) price += 1;
  if(time) price += 1;

  document.getElementById("result").innerText = `Preço total: ${price.toFixed(2)} €`;

  // Monta mensagem para o Telegram
  const message = `🚗 Nova Corrida!\nPonto de partida: ${start}\nDestino: ${end}\nTelefone: ${phone}\nBagagem: ${baggage}\nHorário: ${time || "Não agendado"}\nUrgente: ${urgent ? "Sim" : "Não"}\nPreço: ${price.toFixed(2)} €`;

  // Envia para o Telegram
  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`)
    .then(() => console.log("Mensagem enviada"))
    .catch(err => console.error("Erro:", err));
}
</script>
</body>
</html>
