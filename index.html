<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Taxi Privato</title>
<style>
    body {
        margin: 0;
        background: #111;
        font-family: Arial, sans-serif;
        color: #fff;
    }
    .container {
        max-width: 500px;
        margin: auto;
        padding: 20px;
    }
    .card {
        background: #222;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(255,255,255,0.08);
    }
    input {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        border-radius: 8px;
        border: none;
        background: #333;
        color: white;
    }
    button {
        width: 100%;
        padding: 15px;
        margin-top: 15px;
        border: none;
        border-radius: 8px;
        background: #6A0DAD;
        color: #fff;
        font-size: 17px;
        cursor: pointer;
    }
    #result {
        margin-top: 15px;
        font-size: 18px;
    }
</style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>Taxi Privato - Nord Italia</h2>

        <label>Partenza</label>
        <input type="text" id="start" placeholder="Indirizzo di partenza">

        <label>Destinazione</label>
        <input type="text" id="end" placeholder="Indirizzo di arrivo">

        <button onclick="calcola()">Calcola Preventivo</button>

        <div id="result"></div>
    </div>
</div>

<script>
// CHIAVE API GOOGLE (coloca a sua)
const apiKey = "SUA_GOOGLE_API_KEY";

// TELEGRAM
const botToken = "SEU_BOT_TOKEN";
const chatId = "SEU_CHAT_ID";

// PREZZO
const prezzo_km = 1.2; 

function calcola() {
    const start = document.getElementById("start").value;
    const end = document.getElementById("end").value;

    if (!start || !end) {
        document.getElementById("result").innerHTML = "Inserisci i due indirizzi.";
        return;
    }

    const url = `https://maps.googleapis.com/maps/api/directions/json?origin=${encodeURIComponent(start)}&destination=${encodeURIComponent(end)}&region=it&key=${apiKey}`;

    fetch("https://cors-anywhere.herokuapp.com/" + url) // evita bloqueio CORS
    .then(res => res.json())
    .then(data => {
        if (!data.routes || data.routes.length === 0) {
            document.getElementById("result").innerHTML = "Percorso non trovato.";
            return;
        }

        const distanza_m = data.routes[0].legs[0].distance.value;
        const tempo_s = data.routes[0].legs[0].duration.value;

        const km = (distanza_m / 1000).toFixed(1);
        const minuti = Math.round(tempo_s / 60);
        const prezzo = (km * prezzo_km).toFixed(2);

        document.getElementById("result").innerHTML = `
            üöó Distanza: <b>${km} km</b><br>
            ‚è± Tempo stimato: <b>${minuti} min</b><br>
            üí∂ Prezzo: <b>‚Ç¨${prezzo}</b><br><br>
            ‚úÖ Ti risponder√≤ subito nel messaggio!
        `;

        // manda para Telegram
        const messaggio = `üìç NUOVA CORSA\n\nPartenza: ${start}\nArrivo: ${end}\nDistanza: ${km} km\nTempo: ${minuti} min\nPrezzo: ‚Ç¨${prezzo}`;
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(messaggio)}`);
    });
}
</script>

</body>
</html>
